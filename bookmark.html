<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scholarly Dashboard</title>
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
    rel="stylesheet">
  <link rel="stylesheet" href="assets/css/dashboard.css">
</head>
<body>
  <div class="dashboard d-flex">
    <aside class="sidebar d-flex flex-column align-items-center p-3">
      <img src="assets/images/Group 44.png" alt="Scholarly Logo" class="logo mb-4">
      <div class="profile text-center mb-4">
        <img src="assets/Images/profile.png" 
             alt="Profile" class="profile-img mb-2">
        <h2 id="sidebarName" class="h5 fw-bold">Leonard Tariman</h2>
        <p class="small mb-2">STUDENT</p>
        <a href="edit.html" class="btn btn-primary rounded-pill">Edit Profile</a>
      </div>
      <hr class="w-100">

      <nav class="nav flex-column w-100">
        <a href="dashboard.php" class="nav-link d-flex align-items-center gap-2 text-white">
          <img src="https://storage.googleapis.com/tagjs-prod.appspot.com/v1/P11DPD00iM/ypvgcziq_expires_30_days.png"> Home
        </a>
        <a href="settings.html" class="nav-link d-flex align-items-center gap-2 text-white">
  <img src="https://storage.googleapis.com/tagjs-prod.appspot.com/v1/P11DPD00iM/xqldtbo1_expires_30_days.png"> Settings
</a>

        <a href="bookmark.html" class="nav-link d-flex align-items-center gap-2 text-white">
          <img src="https://storage.googleapis.com/tagjs-prod.appspot.com/v1/P11DPD00iM/ed6vfccw_expires_30_days.png"> Bookmarks
        </a>
        <a href="logout.php" class="nav-link d-flex align-items-center gap-2 text-white">
          <img src="https://storage.googleapis.com/tagjs-prod.appspot.com/v1/P11DPD00iM/2y4kk645_expires_30_days.png"> Logout
        </a>
      </nav>
    </aside>

    <main class="main-content flex-grow-1 p-4">

      <h2 class="fw-bold mb-4">Bookmarks</h2>
      <div id="bookmarkCards" class="d-flex flex-column gap-3"></div>
    </main>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="user-hydrate.js.php"></script>
  <script src="user-hydrate.js.php"></script>
  <script>
    (function(){
      // Sidebar name hydration already handled by user-hydrate
      var wrap = document.getElementById('bookmarkCards');
      fetch('api-bookmarks.php', { credentials: 'same-origin', cache: 'no-store' })
        .then(function(r){ if (!r.ok) return []; return r.json(); })
        .then(function(items){
          if (!Array.isArray(items) || items.length === 0) {
            var info = document.createElement('div');
            info.className = 'alert alert-info';
            info.textContent = 'No bookmarks yet.';
            wrap.appendChild(info);
            return;
          }
          items.forEach(function(s){
            var card = document.createElement('div');
            card.className = 'card p-3 d-flex flex-row justify-content-between align-items-center shadow-sm';
            var left = document.createElement('div');
            left.className = 'card-left d-flex align-items-center gap-3';
            var img = document.createElement('img');
            img.width = 65; img.alt = 'logo';
            img.src = s.image_path && s.image_path.length ? s.image_path : 'assets/Images/image.png';
            var meta = document.createElement('div');
            var h = document.createElement('h3'); h.className = 'h6 fw-bold mb-1'; h.textContent = s.title || '';
            var p = document.createElement('p'); p.className = 'small mb-0'; p.textContent = s.sponsor || '';
            meta.appendChild(h); meta.appendChild(p);
            left.appendChild(img); left.appendChild(meta);
            var btn = document.createElement('a'); btn.className = 'btn btn-primary btn-sm rounded-pill'; btn.href = '#'; btn.textContent = 'View';
            card.appendChild(left); card.appendChild(btn);
            wrap.appendChild(card);
          });
        });
    })();
  </script>
</body>
</html>
